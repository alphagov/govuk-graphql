<%#
Examples:
- https://www.gov.uk/foreign-travel-advice
%>

<%= render "fragments/default_top_level_fields" %>
<%= render "fragments/available_translations" %>
<%= render "fragments/children" %>
<%= render "fragments/document_collections" %>
<%= render "fragments/mainstream_browse_pages" %>
<%= render "fragments/ordered_related_items" %>
<%= render "fragments/organisations" %>
<%= render "fragments/parents" %>
<%= render "fragments/primary_publishing_organisation" %>
<%= render "fragments/suggested_ordered_related_items" %>
<%= render "fragments/taxons" %>

query travel_advice_index($base_path: String!, $locale: String!) {
  edition(base_path: $base_path, locale: $locale) {
    ...DefaultTopLevelFields
    details {
      email_signup_link
      max_cache_time
    }
    links {
      ...AvailableTranslations
      ...Children
      ...DocumentCollections
      ...MainstreamBrowsePages
      ...OrderedRelatedItems
      ...Organisations
      ...Parents
      ...PrimaryPublishingOrganisation
      related_to_step_navs: links_of_type(type: "pages_related_to_step_nav", reverse: true) {
        api_path
        api_url
        base_path
        content_id
        details {
          step_by_step_nav
        }
        document_type
        links {
          pages_related_to_step_nav: links_of_type(type: "pages_related_to_step_nav") {
            api_path
            api_url
            base_path
            content_id
            document_type
            locale
            public_updated_at
            schema_name
            title
            web_url
            withdrawn
          }
        }
        locale
        public_updated_at
        schema_name
        title
        web_url
        withdrawn
      }
      ...SuggestedOrderedRelatedItems
      ...Taxons
    }
  }
}
