<%#
Examples:
- https://www.gov.uk/browse/childcare-parenting/fostering-adoption-surrogacy
- https://www.gov.uk/browse/business/setting-up
- https://www.gov.uk/browse/working/finding-job
- https://www.gov.uk/browse/employing-people/contracts
%>

<%= render "fragments/default_top_level_fields" %>
<%= render "fragments/available_translations" %>
<%= render "fragments/children" %>
<%= render "fragments/parents" %>
<%= render "fragments/primary_publishing_organisation" %>

query mainstream_browse_page($base_path: String!, $locale: String!) {
  edition(base_path: $base_path, locale: $locale) {
    ...DefaultTopLevelFields
    details {
      groups
      internal_name
      ordered_second_level_browse_pages
      second_level_ordering
    }
    links {
      active_top_level_browse_page: links_of_type(type: "active_top_level_browse_page") {
        api_path
        api_url
        base_path
        content_id
        description
        document_type
        locale
        public_updated_at
        schema_name
        title
        web_url
        withdrawn
      }
      ...AvailableTranslations
      ...Children
      ...Parents
      ...PrimaryPublishingOrganisation
      second_level_browse_pages: links_of_type(type: "second_level_browse_pages") {
        api_path
        api_url
        base_path
        content_id
        description
        document_type
        locale
        public_updated_at
        schema_name
        title
        web_url
        withdrawn
      }
      top_level_browse_pages: links_of_type(type: "top_level_browse_pages") {
        api_path
        api_url
        base_path
        content_id
        description
        document_type
        locale
        public_updated_at
        schema_name
        title
        web_url
        withdrawn
      }
    }
  }
}
